# ==============================================================================
# Accountia Microservices - Environment Variables
# ==============================================================================
# Copy this file to .env and fill in all "change_me" values with secure secrets.
# NEVER commit .env file to source control.
#
# Generate secure passwords: openssl rand -base64 32
# Generate JWT secret (256+ bits): openssl rand -base64 64
#
# ==============================================================================
# GITHUB REPOSITORY SECRETS (for CI/CD)
# ==============================================================================
# Add these secrets in GitHub: Settings > Secrets and variables > Actions
#
# Required secrets for CI:
#   - SPRING_DATASOURCE_URL
#   - SPRING_DATASOURCE_USERNAME  
#   - SPRING_DATASOURCE_PASSWORD
#   - KEYCLOAK_ISSUER_URI
#   - KEYCLOAK_JWK_SET_URI
#   - RABBITMQ_USERNAME
#   - RABBITMQ_PASSWORD
#   - SECURITY_JWT_SECRET
#   - REDIS_HOST
#   - REDIS_PORT
#   - EUREKA_SERVICE_URL
#   - ADMIN_SEED_PASSWORD (optional - will auto-generate if not provided)
#
# NOTE: These same variables are used below for local development
# ==============================================================================
# DATABASE - MySQL (for Spring Boot microservices)
# ==============================================================================
SPRING_DATASOURCE_URL=jdbc:mysql://mysql:3306/accountia
SPRING_DATASOURCE_USERNAME=accountia
SPRING_DATASOURCE_PASSWORD=change_me

# ==============================================================================
# DATABASE - PostgreSQL (for reporting-ms and Keycloak)
# ==============================================================================
POSTGRES_DB=accountia_reporting
POSTGRES_USER=accountia
POSTGRES_PASSWORD=change_me
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# Full DATABASE_URL for reporting-ms (alternative to individual vars)
DATABASE_URL=postgresql://accountia:change_me@postgres:5432/accountia_reporting

# ==============================================================================
# KEYCLOAK - OAuth2/OIDC Identity Provider
# ==============================================================================
# Admin credentials (for initial setup)
KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=change_me

# Keycloak server configuration
KEYCLOAK_HOSTNAME=localhost
KEYCLOAK_PORT=8180

# OAuth2 Resource Server settings (REQUIRED for all services)
# Update host/port based on your deployment
KEYCLOAK_ISSUER_URI=http://keycloak:8080/realms/accountia
KEYCLOAK_JWK_SET_URI=http://keycloak:8080/realms/accountia/protocol/openid-connect/certs

# Keycloak OAuth2 Client Secrets (MUST change these in production)
# Generate secure secrets: openssl rand -base64 32
KEYCLOAK_CLIENT_SECRET_FRONTEND=change_me
KEYCLOAK_CLIENT_SECRET_API_GATEWAY=change_me
KEYCLOAK_CLIENT_SECRET_SERVICE_ACCOUNT=change_me

# ==============================================================================
# RABBITMQ - Message Queue
# ==============================================================================
RABBITMQ_HOST=rabbitmq
RABBITMQ_PORT=5672
RABBITMQ_USERNAME=accountia
RABBITMQ_PASSWORD=change_me

# ==============================================================================
# SPRING PROFILES
# ==============================================================================
SPRING_PROFILES_ACTIVE=dev

# ==============================================================================
# CORS (Frontend origin)
# ==============================================================================
CORS_ALLOWED_ORIGINS=http://localhost:3000

# ==============================================================================
# ADMIN SEED - Initial Admin User Creation
# ==============================================================================
# These are used to create initial admin user when the database is empty
# If ADMIN_SEED_PASSWORD is not provided, a secure password will be auto-generated
ADMIN_SEED_EMAIL=admin@accountia.test
ADMIN_SEED_USERNAME=admin
ADMIN_SEED_TENANT_ID=tenant_default
ADMIN_SEED_PASSWORD=change_me_secure_admin_password

# ==============================================================================
# EUREKA SERVICE DISCOVERY
# ==============================================================================
# Eureka Server Configuration
EUREKA_SERVER_PORT=8761
EUREKA_HOSTNAME=localhost
EUREKA_PREFER_IP=true
EUREKA_SELF_PRESERVATION=false
EUREKA_EVICTION_INTERVAL=5000

# Eureka Client Configuration
EUREKA_ENABLED=true
EUREKA_SERVICE_URL=http://localhost:8761/eureka/
EUREKA_CLIENT_REGISTER_WITH_EUREKA=true
EUREKA_CLIENT_FETCH_REGISTRY=true
EUREKA_PREFER_IP=true

# Eureka Logging
LOG_LEVEL_EUREKA=INFO
LOG_LEVEL_DISCOVERY=INFO

# ==============================================================================
# JPA (Optional)
# ==============================================================================
JPA_SHOW_SQL=false
