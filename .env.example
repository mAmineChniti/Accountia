# ==============================================================================
# Accountia Microservices - Environment Variables
# ==============================================================================
# Copy this file to .env and fill in all "change_me" values with secure secrets.
# NEVER commit the .env file to source control.
#
# Generate secure passwords: openssl rand -base64 32
# Generate JWT secret (256+ bits): openssl rand -base64 64
#
# ==============================================================================
# GITHUB REPOSITORY SECRETS (for CI/CD)
# ==============================================================================
# Add these secrets in GitHub: Settings > Secrets and variables > Actions
#
# Required secrets for CI:
#   - SPRING_DATASOURCE_URL
#   - SPRING_DATASOURCE_USERNAME
#   - SPRING_DATASOURCE_PASSWORD
#   - KEYCLOAK_ISSUER_URI
#   - KEYCLOAK_JWK_SET_URI
#   - RABBITMQ_USERNAME
#   - RABBITMQ_PASSWORD
#   - SECURITY_JWT_SECRET
#   - REDIS_HOST
#   - REDIS_PORT
#   - RABBITMQ_HOST
#   - RABBITMQ_PORT
#   - EUREKA_SERVICE_URL
#
# ==============================================================================

# ==============================================================================
# DATABASE - MySQL (for Spring Boot microservices)
# ==============================================================================
MYSQL_ROOT_PASSWORD=change_me
MYSQL_DATABASE=accountia
MYSQL_USER=accountia
MYSQL_PASSWORD=change_me

# Spring Datasource (used by auth-ms, business-ms, invoice-ms, expense-ms, client-ms)
SPRING_DATASOURCE_URL=jdbc:mysql://mysql:3306/accountia
SPRING_DATASOURCE_USERNAME=accountia
SPRING_DATASOURCE_PASSWORD=change_me

# ==============================================================================
# DATABASE - PostgreSQL (for reporting-ms and Keycloak)
# ==============================================================================
POSTGRES_DB=accountia_reporting
POSTGRES_USER=accountia
POSTGRES_PASSWORD=change_me
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# Full DATABASE_URL for reporting-ms (alternative to individual vars)
# DATABASE_URL=postgresql://accountia:change_me@postgres:5432/accountia_reporting

# ==============================================================================
# KEYCLOAK - OAuth2/OIDC Identity Provider
# ==============================================================================
# Admin credentials (for initial setup)
KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=change_me

# Keycloak server configuration
KEYCLOAK_HOSTNAME=localhost
KEYCLOAK_PORT=8180

# OAuth2 Resource Server settings (REQUIRED for all services)
# Update host/port based on your deployment
KEYCLOAK_ISSUER_URI=http://keycloak:8080/realms/accountia
KEYCLOAK_JWK_SET_URI=http://keycloak:8080/realms/accountia/protocol/openid-connect/certs

# ==============================================================================
# RABBITMQ - Message Queue
# ==============================================================================
RABBITMQ_HOST=rabbitmq
RABBITMQ_PORT=5672
RABBITMQ_USERNAME=accountia
RABBITMQ_PASSWORD=change_me
RABBITMQ_VHOST=/

# ==============================================================================
# REDIS - Caching and Session Storage
# ==============================================================================
REDIS_HOST=redis
REDIS_PORT=6379

# ==============================================================================
# EUREKA - Service Discovery
# ==============================================================================
EUREKA_ENABLED=true
EUREKA_HOSTNAME=eureka-server
EUREKA_SERVICE_URL=http://eureka-server:8761/eureka/
EUREKA_PREFER_IP=true
EUREKA_SELF_PRESERVATION=true
EUREKA_EVICTION_INTERVAL=5000

# ==============================================================================
# JWT - Auth Service Token Signing
# ==============================================================================
# Must be at least 256 bits (32+ characters) for HS256
# Generate: openssl rand -base64 64
SECURITY_JWT_SECRET=change_me
SECURITY_JWT_EXPIRATION_MS=3600000

# ==============================================================================
# SPRING PROFILES
# ==============================================================================
SPRING_PROFILES_ACTIVE=dev

# ==============================================================================
# SERVICE PORTS (Optional - defaults shown)
# ==============================================================================
# Eureka Server
EUREKA_SERVER_PORT=8761

# API Gateway
API_GATEWAY_PORT=8080

# Backend Services
AUTH_MS_PORT=8081
BUSINESS_MS_PORT=8082
INVOICE_MS_PORT=8083
EXPENSE_MS_PORT=8084
CLIENT_MS_PORT=8085

# Reporting Service (Python)
REPORTING_MS_PORT=8000

# Frontend
FRONTEND_PORT=3000

# ==============================================================================
# API GATEWAY - Service URLs (Optional - for non-Eureka discovery)
# ==============================================================================
# AUTH_MS_URL=lb://auth-ms
# BUSINESS_MS_URL=lb://business-ms
# INVOICE_MS_URL=lb://invoice-ms
# EXPENSE_MS_URL=lb://expense-ms
# CLIENT_MS_URL=lb://client-ms
# REPORTING_MS_URL=http://reporting-ms:8000

# ==============================================================================
# CORS (Frontend origin)
# ==============================================================================
CORS_ALLOWED_ORIGINS=http://localhost:3000

# ==============================================================================
# LOGGING (Optional)
# ==============================================================================
LOG_LEVEL_APP=DEBUG
LOG_LEVEL_GATEWAY=INFO
LOG_LEVEL_SECURITY=INFO
LOG_LEVEL_EUREKA=INFO
LOG_LEVEL_DISCOVERY=INFO

# ==============================================================================
# JPA (Optional)
# ==============================================================================
JPA_SHOW_SQL=false
